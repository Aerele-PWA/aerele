import{g as B,h as D,r as o,i as u,a as H,o as m,b as f,d as e,j as M,e as s,w as r,u as a,_,k as j,l as w,t as O,f as h,s as L,m as S,T,F as I}from"./index.0e3c50f7.js";const z={class:"w-full sm:w-96 bg-[#f4f5f7] flex justify-center items-center h-screen"},A={class:"w-full h-96 flex justify-center items-center"},J={class:"w-full object-center justify-center flex"},K=["src"],Q={class:"bg-white rounded-lg w-80 h-76 mt-4"},W={class:"p-4"},X={key:0,class:"text-red-500 text-xs pl-2"},Y={class:"relative"},Z={key:1,class:"text-red-500 text-xs pl-2"},ee={class:"w-full"},se=e("div",{class:"flex justify-center"},[e("p",{class:"text-xs p-1 text-gray-600"},"or")],-1),te={class:"fixed bottom-0 flex justify-end w-full sm:w-96"},le={key:0,class:"w-full sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-green-500 rounded-lg opacity-100 font-regular animate-slide-in flex items-center"},ae=e("span",{class:"ml-4"},"Login successfully",-1),oe={key:0,class:"w-full sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-red-500 rounded-lg opacity-100 font-regular animate-slide-in flex items-center"},ne=e("span",{class:"ml-4"},"Login failed",-1),ue=B({__name:"Login",setup(re){const C=D(),c=o(""),p=o(""),v=o(!1),d=o(!1),i=o(!1),g=o(!1),x=u(()=>c.value.includes("@")||c.value.toLowerCase()==="administrator"),y=u(()=>!!p.value),U=u(()=>v.value?"text":"password"),$=u(()=>v.value?"Hide":"Show"),E=()=>{v.value=!v.value},F=t=>{g.value=!0,!(!x.value||!y.value)&&L.login.submit({email:c.value,password:p.value}).then(l=>{d.value=!0,i.value=!1,setTimeout(()=>{d.value=!1,i.value=!1},1e3)}).catch(l=>{console.error(l),d.value=!1,i.value=!0,setTimeout(()=>{d.value=!1,i.value=!1},1e3)})},P=()=>{C.push("/signup")},b=o(""),R=o(window.location.href),q=u(()=>{const t=new URL(R.value);return`${t.protocol}//${t.hostname}`}),G=u(()=>`${q.value}:8000/assets`),k=new Headers;k.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const N={method:"GET",headers:k,redirect:"follow"};return fetch(G.value,N).then(t=>t.text()).then(t=>{const n=new DOMParser().parseFromString(t,"text/html").querySelector('link[rel="shortcut icon"]');n&&(b.value=n.href)}).catch(t=>console.error(t)),(t,l)=>{const V=H("router-link");return m(),f(I,null,[e("div",z,[e("div",A,[e("div",null,[e("div",J,[e("img",{src:b.value,class:"w-16 h-16 object-cover rounded-lg"},null,8,K)]),e("div",Q,[e("div",W,[e("form",{class:"flex flex-col space-y-2 w-full",onSubmit:M(F,["prevent"])},[s(a(j),{required:"",type:"text",label:"User ID",name:"email",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=n=>c.value=n),placeholder:"johndoe@email.com",class:"p-2"},{prefix:r(()=>[s(a(_),{class:"w-4",name:"mail"})]),_:1},8,["modelValue"]),g.value&&!x.value?(m(),f("div",X," Enter a valid email ")):w("",!0),e("div",Y,[s(a(j),{required:"",label:"Password",name:"password",modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=n=>p.value=n),type:U.value,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",class:"p-2 w-full"},{prefix:r(()=>[s(a(_),{class:"w-4",name:"lock"})]),_:1},8,["modelValue","type"]),e("span",{onClick:E,class:"absolute right-2 top-7 cursor-pointer text-gray-600 text-sm p-2"},O($.value),1)]),g.value&&!y.value?(m(),f("div",Z," Enter password ")):w("",!0),e("div",ee,[s(V,{to:"/forget-password",class:"pb-1 text-xs text-gray-600 justify-end flex pr-2 hover:underline"},{default:r(()=>[h(" Forgot Password? ")]),_:1})]),s(a(S),{loading:a(L).login.loading,variant:"solid",class:"w-full"},{default:r(()=>[h("Login")]),_:1},8,["loading"]),se,s(a(S),{variant:"subtle",class:"w-full",onClick:P},{default:r(()=>[h("Sign up")]),_:1})],32)])])])])]),e("div",te,[s(T,{name:"fade"},{default:r(()=>[d.value?(m(),f("div",le,[s(a(_),{class:"w-4 h-4 cursor-pointer mt-[2px] text-green-300",name:"check"}),ae])):w("",!0)]),_:1}),s(T,{name:"fade"},{default:r(()=>[i.value?(m(),f("div",oe,[s(a(_),{class:"w-4 h-4 cursor-pointer mt-[2px] text-red-300",name:"x",onClick:l[2]||(l[2]=n=>i.value=!1)}),ne])):w("",!0)]),_:1})])],64)}}});export{ue as default};
